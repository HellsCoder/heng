!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){var r=n(2),o={routes:[],elements:["a","div","button"],init:function(e,t){e&&this.watchever.watchever(e),this.routes=t,this.dispatch(!0),window.addEventListener("popstate",function(e){var t=new URL(window.location.href);o.navigation().go(t.pathname)})},dispatch:function(e){var t=o.navigation().current();for(var n in this.routes){var i=this.routes[n];if(!i.dispached||!e){var l=r(i.link).exec(t);if(i.link===t||l)return l?((l=l.splice(l.length-3,3)).length>2&&(l=l.slice(1)),i.callback(l)):i.callback(),void(i.dispached=!0)}}this.watchever.watcheverCall()},determite:function(e){this.state.allow(),e=e.split("?")[0];for(let o in this.routes){var t=this.routes[o],n=r(t.link).exec(e);if(t.link===e||n)return n?((n=n.splice(n.length-3,3)).length>2&&(n=n.slice(1)),t.callback(n)):t.callback(),void(t.dispached=!0)}this.watchever.watcheverCall()},browser:function(){return{getBrowser:function(){var e=navigator.userAgent.toLowerCase();return-1!=e.indexOf("msie")&&-1==e.indexOf("opera")&&-1==e.indexOf("webtv")?"msie":-1!=e.indexOf("opera")?"opera":-1!=e.indexOf("gecko")?"gecko":-1!=e.indexOf("safari")?"safari":-1!=e.indexOf("konqueror")?"konqueror":"unknown"}}},navigation:function(){return{go:function(e){"gecko"===o.browser().getBrowser()?(window.history.pushState("","",e),window.history.replaceState("","",e)):window.location.hash=e,o.determite(e)},current:function(){var e=window.location.href;return new URL(e).pathname}}},handlers:{setHandlers:function(){for(let e=0;e<o.elements.length;e++)this.setHandle(o.elements[e])},setHandle:function(e){for(let n=0;n<document.getElementsByTagName(e).length;n++){var t=document.getElementsByTagName(e)[n];t.removeEventListener("click",this.listen,!0),t.addEventListener("click",this.listen,!0)}},listen:function(e){e.preventDefault(),this.hasAttribute("href")&&this.getAttribute("href")!=o.navigation().current()&&o.navigation().go(this.getAttribute("href"))}},watchever:{watchever_callback:null,called:!1,watchever:function(e){this.watchever_callback=e},watcheverCall:function(){null===this.watchever_callback||this.called||(this.watchever_callback(),this.called=!0)}},state:{allow:function(){var e=o.navigation().current();for(let n in o.routes){var t=o.routes[n];t.link===e&&(t.dispached=!1)}o.watchever.called=!1}}};e.exports=o},function(e,t,n){var r=n(0),o=n(3);const i=[{link:"/route",callback:function(){o.render("itstemplate.html",{},{},function(){console.info("Шаблон для /route только что был загружен")})}}];window.onload=(()=>{o.init("#app","templates",function(){}),r.init(function(){o.render("404.html",{},{},function(){console.info("Роут не найден")})},i)})},function(e,t){e.exports=s,e.exports.parse=o,e.exports.compile=function(e,t){return i(o(e,t))},e.exports.tokensToFunction=i,e.exports.tokensToRegExp=u;var n="/",r=new RegExp(["(\\\\.)","(?:\\:(\\w+)(?:\\(((?:\\\\.|[^\\\\()])+)\\))?|\\(((?:\\\\.|[^\\\\()])+)\\))([+*?])?"].join("|"),"g");function o(e,t){for(var o,i=[],c=0,u=0,s="",f=t&&t.delimiter||n,d=t&&t.whitelist||void 0,p=!1;null!==(o=r.exec(e));){var m=o[0],h=o[1],v=o.index;if(s+=e.slice(u,v),u=v+m.length,h)s+=h[1],p=!0;else{var g="",y=o[2],w=o[3],b=o[4],x=o[5];if(!p&&s.length){var E=s.length-1,T=s[E];(!d||d.indexOf(T)>-1)&&(g=T,s=s.slice(0,E))}s&&(i.push(s),s="",p=!1);var k="+"===x||"*"===x,S="?"===x||"*"===x,q=w||b,L=g||f;i.push({name:y||c++,prefix:g,delimiter:L,optional:S,repeat:k,pattern:q?a(q):"[^"+l(L===f?L:L+f)+"]+?"})}}return(s||u<e.length)&&i.push(s+e.substr(u)),i}function i(e){for(var t=new Array(e.length),n=0;n<e.length;n++)"object"==typeof e[n]&&(t[n]=new RegExp("^(?:"+e[n].pattern+")$"));return function(n,r){for(var o="",i=r&&r.encode||encodeURIComponent,l=0;l<e.length;l++){var a=e[l];if("string"!=typeof a){var c,u=n?n[a.name]:void 0;if(Array.isArray(u)){if(!a.repeat)throw new TypeError('Expected "'+a.name+'" to not repeat, but got array');if(0===u.length){if(a.optional)continue;throw new TypeError('Expected "'+a.name+'" to not be empty')}for(var s=0;s<u.length;s++){if(c=i(u[s],a),!t[l].test(c))throw new TypeError('Expected all "'+a.name+'" to match "'+a.pattern+'"');o+=(0===s?a.prefix:a.delimiter)+c}}else if("string"!=typeof u&&"number"!=typeof u&&"boolean"!=typeof u){if(!a.optional)throw new TypeError('Expected "'+a.name+'" to be '+(a.repeat?"an array":"a string"))}else{if(c=i(String(u),a),!t[l].test(c))throw new TypeError('Expected "'+a.name+'" to match "'+a.pattern+'", but got "'+c+'"');o+=a.prefix+c}}else o+=a}return o}}function l(e){return e.replace(/([.+*?=^!:${}()[\]|\/\\])/g,"\\$1")}function a(e){return e.replace(/([=!:$\/()])/g,"\\$1")}function c(e){return e&&e.sensitive?"":"i"}function u(e,t,r){for(var o=(r=r||{}).strict,i=!1!==r.start,a=!1!==r.end,u=r.delimiter||n,s=[].concat(r.endsWith||[]).map(l).concat("$").join("|"),f=i?"^":"",d=0;d<e.length;d++){var p=e[d];if("string"==typeof p)f+=l(p);else{var m=p.repeat?"(?:"+p.pattern+")(?:"+l(p.delimiter)+"(?:"+p.pattern+"))*":p.pattern;t&&t.push(p),p.optional?p.prefix?f+="(?:"+l(p.prefix)+"("+m+"))?":f+="("+m+")?":f+=l(p.prefix)+"("+m+")"}}if(a)o||(f+="(?:"+l(u)+")?"),f+="$"===s?"$":"(?="+s+")";else{var h=e[e.length-1],v="string"==typeof h?h[h.length-1]===u:void 0===h;o||(f+="(?:"+l(u)+"(?="+s+"))?"),v||(f+="(?="+l(u)+"|"+s+")")}return new RegExp(f,c(r))}function s(e,t,n){return e instanceof RegExp?function(e,t){if(!t)return e;var n=e.source.match(/\((?!\?)/g);if(n)for(var r=0;r<n.length;r++)t.push({name:r,prefix:null,delimiter:null,optional:!1,repeat:!1,pattern:null});return e}(e,t):Array.isArray(e)?function(e,t,n){for(var r=[],o=0;o<e.length;o++)r.push(s(e[o],t,n).source);return new RegExp("(?:"+r.join("|")+")",c(n))}(e,t,n):function(e,t,n){return u(o(e,n),t,n)}(e,t,n)}},function(e,t,n){var r=n(4),o=n(0),i=n(5),l={element:null,folder:null,callback:null,init:function(e,t,n){return this.element=e,this.folder=window.location.origin+"/"+t,this.callback=n,this},render:function(e,t,n,a){var c=!1;function u(c){r.request(l.folder+"/"+e,function(e){c&&document.querySelector(".updatable")&&(e=l.getBlockByTemplate(e,".updatable"),n.element=".updatable");for(let n in t)e=e.replace("{{"+n+"}}",t[n]);try{if(n.element){if(document.querySelector(n.element).innerHTML=e,document.querySelector(n.element).getElementsByTagName("script").length>0){var r=document.querySelector(n.element).getElementsByTagName("script")[0].innerHTML;document.querySelector(n.element).getElementsByTagName("script")[0].remove(),(u=document.createElement("script")).innerHTML=r,document.querySelector(n.element).appendChild(u)}}else if(document.querySelector(l.element).innerHTML=e,document.querySelector(l.element).getElementsByTagName("script").length>0){var u;r=document.querySelector(l.element).getElementsByTagName("script")[0].innerHTML;document.querySelector(l.element).getElementsByTagName("script")[0].remove(),(u=document.createElement("script")).innerHTML=r,document.querySelector(l.element).appendChild(u)}null!==l.callback&&l.callback(),o.handlers.setHandlers(),i.startHandle(),a&&a()}catch(e){throw console.info(e),"TemplateRenderError: Template has no loaded by not found app element"}})}!function(){if(null===this.element||null===this.folder)throw"TemplateRenderError: Init template before rendering";if(n.element)if(n.updatable&&(c=!0),document.querySelector(n.element))u(c);else{var o=e.split("/")[0];r.request(l.folder+"/"+o+"/full.html",function(e){for(let n in t)e=e.replace("{{"+n+"}}",t[n]);document.querySelector(l.element).innerHTML=e,u(c)})}else u(c)}()},getBlockByTemplate:function(e,t){var n;if(document.getElementById("utils")?(n=document.getElementById("utils")).innerHTML=e:((n=document.createElement("div")).id="utils",n.style.display="none",n.innerHTML=e),!n.querySelector(t))return"";var r=n.querySelector(t).innerHTML;return n.innerHTML="",r}};e.exports=l},function(e,t){var n={request:function(e,t,n,r){var o=new XMLHttpRequest;r?o.open("GET",e,!0):o.open("GET",e+"?"+(new Date).getTime(),!0),o.addEventListener("load",function(){o.status<400?t(o.responseText):n()}),o.addEventListener("error",function(){throw n(),"HangHttpError: Network not available"}),o.send(null)}};e.exports=n},function(e,t){var n={dom_routes:[],interval:null,init:function(e){this.dom_routes=e},startHandle:function(){for(let n in this.dom_routes){var e=this.dom_routes[n],t=document.querySelectorAll(e.selector);for(let n=0;n<t.length;n++){t[n].addEventListener(e.type,e.callback)}}},update:function(){for(let r in this.dom_routes){var e=this.dom_routes[r],t=document.querySelectorAll(e.selector);for(let r=0;r<t.length;r++){var n=t[r];n.removeEventListener(e.type,e.callback),n.addEventListener(e.type,e.callback)}}}};e.exports=n}]);